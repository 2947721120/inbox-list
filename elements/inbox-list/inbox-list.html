<link rel="import" href="../../bower_components/polymer/polymer.html">
<link rel="import" href="../../bower_components/iron-selector/iron-selector.html">

<dom-module id="inbox-list">
  <template>
    <style>
      :host {
        display: block;
      }
    </style>

    <iron-selector id="selector" on-iron-select="_onIronSelect" on-iron-deselect="_onIronDeselect">
      <content></content>
    </iron-selector>
  </template>

  <script>
    (function() {
      'use strict';
  
      Polymer({
        is: 'inbox-list',

        _onIronSelect: function(event) {
          var inboxItem = event.detail.item;
          inboxItem.open(true);
        },

        _onIronDeselect: function(event) {
          var inboxItem = event.detail.item;
          inboxItem.open(false);
        },

        ready: function() {
          var elem = this;
          document.addEventListener('click', function(event) {
            /* Callback to close the list if we clicked outside of it */
            var node = event.target;
            while (node) {
              if (node === elem) {
                return;
              }
              node = node.parentNode;
            }
            elem.$.selector.select(null);
          });
        }

      });
    })();
  </script>
</dom-module>